# â›µ DockDash

**Smooth sailing for your containers!**

A sleek container management dashboard with a nautical theme. Works with both **Docker** and **Podman**! View container status, manage containers (start/stop/restart), and maintain a shared URL bookmark list accessible across your network.

![Docker](https://img.shields.io/badge/Docker-ready-blue?logo=docker)
![Python](https://img.shields.io/badge/Python-3.11-green?logo=python)
![Flask](https://img.shields.io/badge/Flask-3.0-lightgrey?logo=flask)

## âœ¨ Features

- **ğŸ“Š Container Dashboard**: View all containers with status, search, sort, and pagination
- **ğŸ”— Smart Links (HTTP/HTTPS)**: Probes each exposed port and links to the working scheme
- **ğŸ® Container Control**: Start, stop, and restart containers from the web UI
- **ğŸ“œ Logs Viewer**: View container logs in a modal (tail + follow)
- **ğŸ” Secure Login**: Password-protected access (default: admin/dockdash)
- **ğŸ”— URL Share**: Shared bookmark system for team URLs and services
- **ğŸ“± Responsive Design**: Works on desktop, tablet, and mobile
- **ğŸŒ LAN Accessible**: Access from any device on your network

## ğŸš€ Quick Start

### Prerequisites

- Docker and Docker Compose (or Podman and podman-compose) installed on your host

### Installation

1. **Clone the repository**
   ```bash
   git clone git@github.com:efreem81/dockdash.git
   cd dockdash
   ```

2. **Start DockDash**
   ```bash
   ./deploy.sh
   ```

   Helpful options:
   ```bash
   ./deploy.sh --quick   # restart without rebuilding
   ./deploy.sh --logs    # show recent logs after starting
   ```

3. **Access the Web UI**
   
   Open your browser and navigate to:
   ```
   http://localhost:9999
   ```
   
   Or from another device on your network:
   ```
   http://<host-ip>:9999
   ```

4. **Login**
   - **Username**: `admin`
   - **Password**: `dockdash`

   > âš ï¸ **Important**: Change the default password after first login!

### Using with Podman

DockDash works with Podman! For **rootless Podman**:

```bash
# Edit docker-compose.yml to use Podman socket
sed -i 's|/var/run/docker.sock|/run/user/1000/podman/podman.sock|' docker-compose.yml

# Start with podman-compose
podman-compose up -d
```

For **rootful Podman**, enable the Docker-compatible socket:

```bash
sudo systemctl enable --now podman.socket
# Then use docker-compose as normal
```

## âš™ï¸ Configuration

### Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `SECRET_KEY` | (recommended) | Flask secret key for sessions (generated by `deploy.sh` if missing) |
| `DEFAULT_USERNAME` | `admin` | Default admin username |
| `DEFAULT_PASSWORD` | `dockdash` | Default admin password |
| `DOCKDASH_PORT` | `9999` | Host port to expose DockDash on |
| `HOST_IP` | (auto-detected) | LAN IP used for container link generation |
| `DOCKER_HOST` | `unix:///var/run/docker.sock` | Docker/Podman socket path |
| `SESSION_COOKIE_SECURE` | `0` | Set to `1` when running behind HTTPS |
| `SESSION_LIFETIME_HOURS` | `12` | Session lifetime |

### Custom Configuration

Create a `.env` file in the project root:

```env
SECRET_KEY=your-super-secret-key-here
DEFAULT_USERNAME=admin
DEFAULT_PASSWORD=your-secure-password
DOCKDASH_PORT=9999
HOST_IP=192.168.1.50
# If behind HTTPS (reverse proxy), enable secure cookies
# SESSION_COOKIE_SECURE=1
```

### Change the Port

Set `DOCKDASH_PORT` when starting:

```bash
DOCKDASH_PORT=3000 ./deploy.sh
```

## ğŸ“– Usage

### Dashboard

The dashboard displays all Docker containers on the host:

- **Green badge**: Container is running
- **Red badge**: Container is stopped/exited
- **Service links**: Click to open the service in a new tab (DockDash probes HTTP vs HTTPS)

**Actions available:**
- ğŸ”„ **Restart**: Restart a running container
- â¹ï¸ **Stop**: Stop a running container
- â–¶ï¸ **Start**: Start a stopped container
- ğŸ“œ **Logs**: View logs (tail + follow)

### URL Share

A shared bookmark system for your team:

1. Click **"URL Share"** in the navigation
2. Click **"Add URL"** to add a new bookmark
3. Organize URLs by category
4. Access shared URLs from any device

### Change Password

1. Click **"Settings"** in the navigation
2. Enter your current password
3. Set a new password (minimum 6 characters)
4. Click **"Change Password"**

## ğŸ”’ Security Considerations

1. **Change default credentials immediately** after first login
2. **Use a strong SECRET_KEY** in production
3. **Limit network access** - only expose to trusted networks
4. Consider placing behind a **reverse proxy with HTTPS**

DockDash includes CSRF protection and sane cookie defaults (LAN-friendly). If you expose it beyond a trusted LAN, put it behind HTTPS and set `SESSION_COOKIE_SECURE=1`.

## ğŸ—ï¸ Architecture

```
dockdash/
â”œâ”€â”€ app.py              # Flask application
â”œâ”€â”€ Dockerfile          # Container build instructions
â”œâ”€â”€ docker-compose.yml  # Container orchestration
â”œâ”€â”€ deploy.sh            # Recommended build/run script
â”œâ”€â”€ requirements.txt    # Python dependencies
â”œâ”€â”€ templates/          # Jinja2 HTML templates
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ login.html
â”‚   â”œâ”€â”€ dashboard.html
â”‚   â”œâ”€â”€ urls.html
â”‚   â”œâ”€â”€ add_url.html
â”‚   â”œâ”€â”€ edit_url.html
â”‚   â””â”€â”€ change_password.html
â””â”€â”€ static/
    â”œâ”€â”€ logo.svg        # DockDash logo
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ style.css   # Nautical theme styles
    â””â”€â”€ js/
        â””â”€â”€ app.js      # Client-side JavaScript
```

## ğŸ› ï¸ Development

### Run Locally (without Docker)

```bash
# Create virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Run the application
python app.py
```

### Build Docker Image

```bash
docker build -t dockdash .
```

### Run with Docker

```bash
docker run -d \
  --name dockdash \
  -p 8080:5000 \
  -v /var/run/docker.sock:/var/run/docker.sock \
  dockdash
```

## ğŸ“ API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/api/containers` | List all containers |
| POST | `/api/container/<id>/start` | Start a container |
| POST | `/api/container/<id>/stop` | Stop a container |
| POST | `/api/container/<id>/restart` | Restart a container |
| GET | `/api/container/<id>/logs` | Fetch container logs (tail + timestamps) |
| GET | `/api/link/probe` | Probe a host:port and return the working scheme |
| GET | `/api/urls` | List all shared URLs |
| GET | `/health` | Health status (db + docker availability) |

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- [Flask](https://flask.palletsprojects.com/) - Web framework
- [Docker SDK for Python](https://docker-py.readthedocs.io/) - Docker API integration
- [Flask-Login](https://flask-login.readthedocs.io/) - User session management

---

â›µ **DockDash** - Smooth sailing for your containers!
