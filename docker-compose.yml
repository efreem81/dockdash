services:
  dockdash:
    build: .
    container_name: dockdash
    ports:
      - "${DOCKDASH_PORT:-9999}:5000"
    volumes:
      # Mount Docker socket (or Podman socket for rootless: /run/user/1000/podman/podman.sock)
      - /var/run/docker.sock:/var/run/docker.sock
      # Use bind mount for data directory (more reliable than named volumes)
      - ./data:/app/data
    environment:
      - SECRET_KEY=${SECRET_KEY:-change-me-in-production}
      - DEFAULT_USERNAME=${DEFAULT_USERNAME:-admin}
      - DEFAULT_PASSWORD=${DEFAULT_PASSWORD:-dockdash}
      - DOCKDASH_PORT=${DOCKDASH_PORT:-9999}
    restart: unless-stopped
